{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getClientAuthenticationWithDependencies = void 0;\n\nconst solid_client_authn_core_1 = require(\"@inrupt/solid-client-authn-core\");\n\nconst StorageUtility_1 = __importDefault(require(\"./storage/StorageUtility\"));\n\nconst ClientAuthentication_1 = __importDefault(require(\"./ClientAuthentication\"));\n\nconst OidcLoginHandler_1 = __importDefault(require(\"./login/oidc/OidcLoginHandler\"));\n\nconst AuthorizationCodeWithPkceOidcHandler_1 = __importDefault(require(\"./login/oidc/oidcHandlers/AuthorizationCodeWithPkceOidcHandler\"));\n\nconst IssuerConfigFetcher_1 = __importDefault(require(\"./login/oidc/IssuerConfigFetcher\"));\n\nconst FallbackRedirectHandler_1 = require(\"./login/oidc/redirectHandler/FallbackRedirectHandler\");\n\nconst GeneralLogoutHandler_1 = __importDefault(require(\"./logout/GeneralLogoutHandler\"));\n\nconst SessionInfoManager_1 = require(\"./sessionInfo/SessionInfoManager\");\n\nconst AuthCodeRedirectHandler_1 = require(\"./login/oidc/redirectHandler/AuthCodeRedirectHandler\");\n\nconst AggregateRedirectHandler_1 = __importDefault(require(\"./login/oidc/redirectHandler/AggregateRedirectHandler\"));\n\nconst BrowserStorage_1 = __importDefault(require(\"./storage/BrowserStorage\"));\n\nconst Redirector_1 = __importDefault(require(\"./login/oidc/Redirector\"));\n\nconst ClientRegistrar_1 = __importDefault(require(\"./login/oidc/ClientRegistrar\"));\n\nfunction getClientAuthenticationWithDependencies(dependencies) {\n  const inMemoryStorage = new solid_client_authn_core_1.InMemoryStorage();\n  const secureStorage = dependencies.secureStorage || inMemoryStorage;\n  const insecureStorage = dependencies.insecureStorage || new BrowserStorage_1.default();\n  const storageUtility = new StorageUtility_1.default(secureStorage, insecureStorage);\n  const issuerConfigFetcher = new IssuerConfigFetcher_1.default(storageUtility);\n  const clientRegistrar = new ClientRegistrar_1.default(storageUtility);\n  const sessionInfoManager = new SessionInfoManager_1.SessionInfoManager(storageUtility);\n  const loginHandler = new OidcLoginHandler_1.default(storageUtility, new AuthorizationCodeWithPkceOidcHandler_1.default(storageUtility, new Redirector_1.default()), issuerConfigFetcher, clientRegistrar);\n  const redirectHandler = new AggregateRedirectHandler_1.default([new AuthCodeRedirectHandler_1.AuthCodeRedirectHandler(storageUtility, sessionInfoManager, issuerConfigFetcher, clientRegistrar), new FallbackRedirectHandler_1.FallbackRedirectHandler()]);\n  return new ClientAuthentication_1.default(loginHandler, redirectHandler, new GeneralLogoutHandler_1.default(sessionInfoManager), sessionInfoManager, issuerConfigFetcher);\n}\n\nexports.getClientAuthenticationWithDependencies = getClientAuthenticationWithDependencies;","map":{"version":3,"sources":["../src/dependencies.ts"],"names":[],"mappings":";;;;;;;;;;;;;AA6BA,MAAA,yBAAA,GAAA,OAAA,CAAA,iCAAA,CAAA;;AACA,MAAA,gBAAA,GAAA,eAAA,CAAA,OAAA,CAAA,0BAAA,CAAA,CAAA;;AACA,MAAA,sBAAA,GAAA,eAAA,CAAA,OAAA,CAAA,wBAAA,CAAA,CAAA;;AACA,MAAA,kBAAA,GAAA,eAAA,CAAA,OAAA,CAAA,+BAAA,CAAA,CAAA;;AACA,MAAA,sCAAA,GAAA,eAAA,CAAA,OAAA,CAAA,gEAAA,CAAA,CAAA;;AACA,MAAA,qBAAA,GAAA,eAAA,CAAA,OAAA,CAAA,kCAAA,CAAA,CAAA;;AACA,MAAA,yBAAA,GAAA,OAAA,CAAA,sDAAA,CAAA;;AACA,MAAA,sBAAA,GAAA,eAAA,CAAA,OAAA,CAAA,+BAAA,CAAA,CAAA;;AACA,MAAA,oBAAA,GAAA,OAAA,CAAA,kCAAA,CAAA;;AACA,MAAA,yBAAA,GAAA,OAAA,CAAA,sDAAA,CAAA;;AACA,MAAA,0BAAA,GAAA,eAAA,CAAA,OAAA,CAAA,uDAAA,CAAA,CAAA;;AACA,MAAA,gBAAA,GAAA,eAAA,CAAA,OAAA,CAAA,0BAAA,CAAA,CAAA;;AACA,MAAA,YAAA,GAAA,eAAA,CAAA,OAAA,CAAA,yBAAA,CAAA,CAAA;;AACA,MAAA,iBAAA,GAAA,eAAA,CAAA,OAAA,CAAA,8BAAA,CAAA,CAAA;;AAOA,SAAgB,uCAAhB,CAAwD,YAAxD,EAGC;AACC,QAAM,eAAe,GAAG,IAAI,yBAAA,CAAA,eAAJ,EAAxB;AACA,QAAM,aAAa,GAAG,YAAY,CAAC,aAAb,IAA8B,eAApD;AACA,QAAM,eAAe,GAAG,YAAY,CAAC,eAAb,IAAgC,IAAI,gBAAA,CAAA,OAAJ,EAAxD;AAEA,QAAM,cAAc,GAAG,IAAI,gBAAA,CAAA,OAAJ,CACrB,aADqB,EAErB,eAFqB,CAAvB;AAKA,QAAM,mBAAmB,GAAG,IAAI,qBAAA,CAAA,OAAJ,CAAwB,cAAxB,CAA5B;AACA,QAAM,eAAe,GAAG,IAAI,iBAAA,CAAA,OAAJ,CAAoB,cAApB,CAAxB;AAEA,QAAM,kBAAkB,GAAG,IAAI,oBAAA,CAAA,kBAAJ,CAAuB,cAAvB,CAA3B;AAEA,QAAM,YAAY,GAIhB,IAAI,kBAAA,CAAA,OAAJ,CACE,cADF,EAEE,IAAI,sCAAA,CAAA,OAAJ,CACE,cADF,EAEE,IAAI,YAAA,CAAA,OAAJ,EAFF,CAFF,EAME,mBANF,EAOE,eAPF,CAJF;AAcA,QAAM,eAAe,GAAG,IAAI,0BAAA,CAAA,OAAJ,CAA6B,CACnD,IAAI,yBAAA,CAAA,uBAAJ,CACE,cADF,EAEE,kBAFF,EAGE,mBAHF,EAIE,eAJF,CADmD,EASnD,IAAI,yBAAA,CAAA,uBAAJ,EATmD,CAA7B,CAAxB;AAYA,SAAO,IAAI,sBAAA,CAAA,OAAJ,CACL,YADK,EAEL,eAFK,EAGL,IAAI,sBAAA,CAAA,OAAJ,CAAyB,kBAAzB,CAHK,EAIL,kBAJK,EAKL,mBALK,CAAP;AAOD;;AAnDD,OAAA,CAAA,uCAAA,GAAA,uCAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getClientAuthenticationWithDependencies = void 0;\nconst solid_client_authn_core_1 = require(\"@inrupt/solid-client-authn-core\");\nconst StorageUtility_1 = __importDefault(require(\"./storage/StorageUtility\"));\nconst ClientAuthentication_1 = __importDefault(require(\"./ClientAuthentication\"));\nconst OidcLoginHandler_1 = __importDefault(require(\"./login/oidc/OidcLoginHandler\"));\nconst AuthorizationCodeWithPkceOidcHandler_1 = __importDefault(require(\"./login/oidc/oidcHandlers/AuthorizationCodeWithPkceOidcHandler\"));\nconst IssuerConfigFetcher_1 = __importDefault(require(\"./login/oidc/IssuerConfigFetcher\"));\nconst FallbackRedirectHandler_1 = require(\"./login/oidc/redirectHandler/FallbackRedirectHandler\");\nconst GeneralLogoutHandler_1 = __importDefault(require(\"./logout/GeneralLogoutHandler\"));\nconst SessionInfoManager_1 = require(\"./sessionInfo/SessionInfoManager\");\nconst AuthCodeRedirectHandler_1 = require(\"./login/oidc/redirectHandler/AuthCodeRedirectHandler\");\nconst AggregateRedirectHandler_1 = __importDefault(require(\"./login/oidc/redirectHandler/AggregateRedirectHandler\"));\nconst BrowserStorage_1 = __importDefault(require(\"./storage/BrowserStorage\"));\nconst Redirector_1 = __importDefault(require(\"./login/oidc/Redirector\"));\nconst ClientRegistrar_1 = __importDefault(require(\"./login/oidc/ClientRegistrar\"));\nfunction getClientAuthenticationWithDependencies(dependencies) {\n    const inMemoryStorage = new solid_client_authn_core_1.InMemoryStorage();\n    const secureStorage = dependencies.secureStorage || inMemoryStorage;\n    const insecureStorage = dependencies.insecureStorage || new BrowserStorage_1.default();\n    const storageUtility = new StorageUtility_1.default(secureStorage, insecureStorage);\n    const issuerConfigFetcher = new IssuerConfigFetcher_1.default(storageUtility);\n    const clientRegistrar = new ClientRegistrar_1.default(storageUtility);\n    const sessionInfoManager = new SessionInfoManager_1.SessionInfoManager(storageUtility);\n    const loginHandler = new OidcLoginHandler_1.default(storageUtility, new AuthorizationCodeWithPkceOidcHandler_1.default(storageUtility, new Redirector_1.default()), issuerConfigFetcher, clientRegistrar);\n    const redirectHandler = new AggregateRedirectHandler_1.default([\n        new AuthCodeRedirectHandler_1.AuthCodeRedirectHandler(storageUtility, sessionInfoManager, issuerConfigFetcher, clientRegistrar),\n        new FallbackRedirectHandler_1.FallbackRedirectHandler(),\n    ]);\n    return new ClientAuthentication_1.default(loginHandler, redirectHandler, new GeneralLogoutHandler_1.default(sessionInfoManager), sessionInfoManager, issuerConfigFetcher);\n}\nexports.getClientAuthenticationWithDependencies = getClientAuthenticationWithDependencies;\n//# sourceMappingURL=dependencies.js.map"]},"metadata":{},"sourceType":"script"}